<!DOCTYPE html>
<html lang="en">

<%- include("partials/header") -%>

    <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <a href="#" class="brand-link">
            <img src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
                style="opacity: .8">
            <span class="brand-text font-weight-light">Analytics</span>
        </a>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Sidebar user panel (optional) -->
            <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                <div class="image">
                    <img src="images/user.png" class="img-circle elevation-2" alt="User Image">
                </div>
                <div class="info">
                    <a href="#" class="d-block">
                        <%= name %>
                    </a>
                </div>
            </div>

            <!-- SidebarSearch Form -->
            <div class="form-inline">
                <div class="input-group" data-widget="sidebar-search">
                    <input class="form-control form-control-sidebar" type="search" placeholder="Search"
                        aria-label="Search">
                    <div class="input-group-append">
                        <button class="btn btn-sidebar">
                            <i class="fas fa-search fa-fw"></i>
                        </button>
                    </div>
                </div>
            </div>
            <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
    </aside>

    <div class="content-wrapper">
        <section class="content">
            <div class="container-fluid">
                <div class="jumbotron jumbotron-fluid bg-secondary">
                    <div class="container">
                        <h1 class="display-4 font-weight-bold">Analytics</h1>
                        <p class="lead font-weight-bold">Based on the Human Resource Data of an Organization</p>
                    </div>
                </div>
                <div class="container">
                    <p>

                        <button class="btn btn-primary" type="button" data-toggle="collapse"
                            data-target="#multiCollapseExample1" aria-expanded="false"
                            aria-controls="multiCollapseExample1">Bar Graph</button>
                    </p>
                    <div class="row">
                        <div class="col-12">
                            <div class="collapse multi-collapse" id="multiCollapseExample1">
                                <div class="card card-body" style="height: 30rem;">
                                    <canvas id="myCompareChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </section>
    </div>

    <%- include("partials/footer") -%> 

    <script>
        const ctx1 = document.getElementById('myCompareChart');
        var data = []
        var labels = []
        var avgResults = []
        for (var x of '<%= dataSet %>'.split(',')) {
            data.push(x);
        }
        for (var x of '<%= labels %>'.split(',')) {
            labels.push(x);
        }
        for (var x of '<%= avgResults %>'.split(',')) {
            avgResults.push(x);
        }
        var dataObj = {
            labels: labels,
            datasets: [
                {
                    label: 'Current Employee',
                    backgroundColor: "#3e95cd",
                    data: data
                }, {
                    label: "Average of Employee",
                    backgroundColor: "#8e5ea2",
                    data: avgResults
                }

            ]
        }
        var optionsObj = {
            maintainAspectRatio: false,
            title: {
                display: true,
                text: 'Predicted world population (millions) in 2050'
            }
        }
        new Chart(ctx1, {
            type: 'bar',
            data: dataObj,
            options: optionsObj
        });
    </script>
    </body>

    </html>